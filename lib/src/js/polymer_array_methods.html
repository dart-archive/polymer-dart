<link rel="import" href="polymer_base_dart.html">
<script>
  (function() {
    var _originalPush = Polymer.Base.push;
    Polymer.Base.push = function(path) {
      var value = _originalPush.apply(this, arguments);
      var dartList = this.get(path).__dartClass__;
      if (dartList == null) return value;
      Polymer.Dart.push(dartList, Array.prototype.splice.call(arguments, 1));
      return value;
    };

    Polymer.Base._originalPop = Polymer.Base.pop;
    Polymer.Base.pop = function(path) {
      var value = this._originalPop(path);
      var dartList = this.get(path).__dartClass__;
      if (dartList == null) return value;
      Polymer.Dart.pop(dartList);
      return value;
    };

    Polymer.Base._originalShift = Polymer.Base.shift;
    Polymer.Base.shift = function(path) {
      var value = this._originalShift(path);
      var dartList = this.get(path).__dartClass__;
      if (dartList == null) return value;
      Polymer.Dart.shift(dartList);
      return value;
    };

    var _originalUnshift = Polymer.Base.unshift;
    Polymer.Base.unshift = function(path) {
      var value = _originalUnshift.apply(this, arguments);
      var dartList = this.get(path).__dartClass__;
      if (dartList == null) return value;
      Polymer.Dart.unshift(dartList, Array.prototype.splice.call(arguments, 1));
      return value;
    };

    var _originalSplice = Polymer.Base.splice;
    Polymer.Base.splice = function(path, index, removeCount) {
      var value = _originalSplice.apply(this, arguments);
      var dartList = this.get(path).__dartClass__;
      if (dartList == null) return value;
      Polymer.Dart.splice(
          dartList, index, removeCount,
          Array.prototype.splice.call(arguments, 3));
      return value;
    };
  })();
</script>
